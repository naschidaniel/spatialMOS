<h3 class="mt-4">API query</h3>
<table class="table table-sm">
  <tbody>
    <tr>
      <th scope="row">{{ licence }}</th>
      <td>
        <a href="{{ query_url }}" target="_blank" rel="noreferrer">{{ query_url }}</a>
      </td>
    </tr>
    {% for key, value in api_data.items %}
    <tr>
      <th scope="row">{{ key }}</th>
      <td>{{ value }}</td>
    </tr>
    {% endfor %}
    {% if spatialmos_api_url %}
    <tr>
      <th scope="row">moses.tirol Prediction: </th>
      <td>
        <a href="{{ spatialmos_api_url }}" target="_blank" rel="noreferrer">{{ spatialmos_api_url }}</a>
      </td>
    </tr>
    {% endif %}
  </tbody>
</table>

<div id="map" style="height:400px;"></div>

<script type="text/javascript">
  // Creating map options
  var lat = "{{ osm_data.lat }}"
  var lon = "{{ osm_data.lon }}"

  // Creating map options
  var map = L.map('map', {
    center: [lat, lon],
    zoom: 14
  });

  // Creating a Layer object
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png?{foo}', { foo: 'bar', attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>' }).addTo(map);
  
  // add a marker object
  var marker = L.marker([lat, lon]).addTo(map);
  marker.bindPopup("{{ api_data.display_name }}").openPopup();

</script>